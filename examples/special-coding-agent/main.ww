coding_ag = agent llm {
    api_key: $OPENAI_API_KEY
    cache: False
    planning: True
    tools: [github_api, dev_env, kb, llm]
    
    hooks: [
        {
            event: "input.received"
            script_path: "hooks.py"
            function_name: "print_input_received"
        },
        {
            event: "agent.thought"
            script_path: "hooks.py"
            function_name: "print_agent_thought"
        },
        {
            event: "agent.action"
            script_path: "hooks.py"
            function_name: "print_agent_action"
        },
        {
            event: "tool.call"
            script_path: "hooks.py"
            function_name: "print_tool_call"
        },
        {
            event: "tool.observation"
            script_path: "hooks.py"
            function_name: "print_tool_observation"
        },
        {
            event: "agent.step_complete"
            script_path: "hooks.py"
            function_name: "print_step_complete"
        },
        {
            event: "agent.error"
            script_path: "hooks.py"
            function_name: "print_error"
        }
    ]
    
    pipes: [
        {
            event: "input.received"
            script_path: "pipes.py"
            function_name: "add_claude_md_to_input"
        }
    ]
}

input = input command_line {
    to: coding_ag
}

llm = llm openai {
    knowledge_base: kb
    api_key: $OPENAI_API_KEY
}

github_api = api functions {
    path: "github_api.py"
}

kb = knowledge_base chroma {
    api_key: $OPENAI_API_KEY
    file_to_embed: ".woodwork/coding-env"
}

dev_env = environment coding {
    repo_url: "willwoodward/woodwork-engine"
    local_path: "/workspace"
    vector_db: kb
    setup_scripts: [
        "/workspace/setup_env.sh"
    ]
    startup_scripts: [
        "/workspace/startup_env.sh"
    ]
    environment_variables: {
        GIT_AUTHOR_NAME: $AGENT_GIT_NAME
        GIT_AUTHOR_EMAIL: $AGENT_GIT_EMAIL
        GIT_COMMITTER_NAME: $AGENT_GIT_NAME
        GIT_COMMITTER_EMAIL: $AGENT_GIT_EMAIL
        GITHUB_TOKEN: $GITHUB_PAT
        PYTHON_ENV: "development"
    }
}