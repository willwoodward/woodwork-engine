llm = llm openai {
    api_key: $OPENAI_API_KEY
    model: "gpt-5-mini"
}

coding_ag = agent llm {
    model: llm
    cache: False
    planning: True
    tools: [github_api, dev_env]
    
    hooks: [
        {
            event: "input.received"
            script_path: "hooks.py"
            function_name: "print_input_received"
        },
        {
            event: "agent.thought"
            script_path: "hooks.py"
            function_name: "print_agent_thought"
        },
        {
            event: "agent.action"
            script_path: "hooks.py"
            function_name: "print_agent_action"
        },
        {
            event: "tool.call"
            script_path: "hooks.py"
            function_name: "print_tool_call"
        },
        {
            event: "tool.observation"
            script_path: "hooks.py"
            function_name: "print_tool_observation"
        },
        {
            event: "agent.step_complete"
            script_path: "hooks.py"
            function_name: "print_step_complete"
        },
        {
            event: "agent.error"
            script_path: "hooks.py"
            function_name: "print_error"
        }
    ]
    
    pipes: [
        {
            event: "input.received"
            script_path: "pipes.py"
            function_name: "add_claude_md_to_input"
        }
    ]
}

input = input api {
    to: coding_ag
}

github_api = mcp server {
  server: "github/mcp-server"
  version: "latest"
  toolsets: "repos,issues"
  env: {
    GITHUB_TOKEN: $GITHUB_MCP_TOKEN
  }
}

dev_env = environment coding {
    repo_url: "willwoodward/woodwork-engine"
    local_path: "/workspace"
    setup_scripts: [
        "/workspace/setup_env.sh"
    ]
    startup_scripts: [
        "/workspace/startup_env.sh"
    ]
    environment_variables: {
        GIT_AUTHOR_NAME: $AGENT_GIT_NAME
        GIT_AUTHOR_EMAIL: $AGENT_GIT_EMAIL
        GIT_COMMITTER_NAME: $AGENT_GIT_NAME
        GIT_COMMITTER_EMAIL: $AGENT_GIT_EMAIL
        GITHUB_TOKEN: $GITHUB_PAT
        PYTHON_ENV: "development"
    }
}